openapi: 3.0.0
info:
  title: API Tambahan Frontend Absensi
  description: Dokumentasi khusus untuk fitur Upload File dan Status Harian
  version: 1.0.0
servers:
  - url: http://localhost:3000

paths:
  # =======================
  # STATUS HARIAN (DASHBOARD)
  # =======================
  /api/kehadiran/status-hari-ini:
    get:
      summary: Cek Status Kehadiran Hari Ini
      description: Digunakan frontend untuk menentukan apakah tombol Check-in aktif atau mati.
      tags: [Kehadiran]
      responses:
        200:
          description: Data Status
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  status:
                    type: string
                    enum: [BELUM_ABSEN, HADIR, TERLAMBAT, IZIN, CUTI]
                    description: "Jika BELUM_ABSEN -> Tombol Checkin Aktif. Jika lainnya -> Tombol Mati."
                  data:
                    type: object
                    nullable: true
                    description: "Object Kehadiran lengkap jika sudah absen/izin"

  # =======================
  # PERIZINAN (UPLOAD FILE)
  # =======================
  /api/perizinan/cuti:
    post:
      summary: Ajukan Izin/Cuti dengan Bukti
      tags: [Perizinan]
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                tipe:
                  type: string
                  enum: [IZIN, CUTI]
                jenis_izin:
                  type: string
                tanggal_mulai:
                  type: string
                  example: "2026-02-01"
                tanggal_selesai:
                  type: string
                  example: "2026-02-03"
                keterangan:
                  type: string
                file_bukti:
                  type: string
                  format: binary
                  description: "File gambar/dokumen bukti (Opsional)"
      responses:
        200:
          description: Berhasil diajukan
          content:
            application/json:
              example:
                message: "Pengajuan izin berhasil dikirim"

  # =======================
  # KOREKSI (UPLOAD FILE)
  # =======================
  /api/koreksi/ajukan:
    post:
      summary: Ajukan Koreksi Absen dengan Bukti
      tags: [Koreksi]
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                tanggal_kehadiran:
                  type: string
                  example: "2026-02-10"
                tipe_koreksi:
                  type: string
                  enum: [TELAT, PULANG_CEPAT, LUAR_RADIUS]
                alasan:
                  type: string
                file_bukti:
                  type: string
                  format: binary
                  description: "File bukti pendukung (Opsional)"
      responses:
        200:
          description: Berhasil diajukan
          content:
            application/json:
              example:
                message: "Pengajuan koreksi berhasil dikirim"